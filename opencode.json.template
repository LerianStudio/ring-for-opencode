{
  // =============================================================================
  // OpenCode Configuration Template (JSONC)
  // =============================================================================
  // This is a comprehensive template showing ALL configuration options.
  // Copy this file to opencode.json or opencode.jsonc in your project root
  // or in ~/.config/opencode/ for global configuration.
  //
  // Config precedence (highest to lowest):
  //   1. OPENCODE_CONFIG_CONTENT environment variable
  //   2. Project config (opencode.jsonc/opencode.json in project root)
  //   3. Custom config path (OPENCODE_CONFIG environment variable)
  //   4. Global user config (~/.config/opencode/opencode.json)
  //   5. Remote/well-known config (from enterprise auth)
  //
  // Special syntax:
  //   {env:VAR_NAME} - Substitutes environment variable value
  //   {file:path/to/file} - Substitutes file contents (relative to config dir)
  // =============================================================================

  // JSON Schema for IDE autocompletion and validation
  "$schema": "https://opencode.ai/config.json",

  // ---------------------------------------------------------------------------
  // GENERAL SETTINGS
  // ---------------------------------------------------------------------------

  // Theme name for the interface
  // Use built-in themes or custom theme names from your config directory
  "theme": "catppuccin-mocha",

  // Default model in "provider/model" format
  // Examples: "anthropic/claude-sonnet-4-20250514", "openai/gpt-4o", "google/gemini-2.0-flash"
  "model": "anthropic/claude-sonnet-4-20250514",

  // Small model for lightweight tasks (title generation, summaries, etc.)
  // Uses a faster/cheaper model for auxiliary tasks
  "small_model": "anthropic/claude-3-5-haiku-20241022",

  // Default agent to use when none is specified
  // Must be a primary agent (e.g., "build", "plan")
  // Falls back to "build" if not set or invalid
  "default_agent": "build",

  // Custom username to display in conversations
  // Defaults to system username if not set
  "username": "developer",

  // Log level for debugging: "DEBUG", "INFO", "WARN", "ERROR"
  "logLevel": "INFO",

  // Auto-update behavior:
  //   true - Automatically update to latest version
  //   false - Disable auto-updates
  //   "notify" - Show notification when update is available
  "autoupdate": "notify",

  // Session sharing behavior:
  //   "manual" - Allow manual sharing via commands
  //   "auto" - Automatically share newly created sessions
  //   "disabled" - Disable all sharing functionality
  "share": "manual",

  // Enable file snapshots before edits (for undo/restore)
  "snapshot": true,

  // ---------------------------------------------------------------------------
  // PROVIDER CONFIGURATION
  // ---------------------------------------------------------------------------

  // Providers to completely disable (even if credentials are available)
  "disabled_providers": [
    // "openai",
    // "google"
  ],

  // When set, ONLY these providers will be enabled (exclusive list)
  // All other providers will be ignored
  "enabled_providers": [
    // "anthropic",
    // "openai"
  ],

  // Provider-specific configurations and model overrides
  "provider": {
    // Anthropic provider configuration
    "anthropic": {
      // Provider name (display name)
      "name": "Anthropic",
      // API key (use {env:} syntax for security)
      "options": {
        "apiKey": "{env:ANTHROPIC_API_KEY}",
        // Custom base URL for proxy or enterprise deployments
        "baseURL": "https://api.anthropic.com",
        // Request timeout in milliseconds (default: 300000 = 5 minutes)
        // Set to false to disable timeout entirely
        "timeout": 300000
      },
      // Whitelist: only allow these specific models
      "whitelist": [
        // "claude-sonnet-4-20250514",
        // "claude-3-5-haiku-20241022"
      ],
      // Blacklist: exclude these models from availability
      "blacklist": [
        // "claude-3-opus-20240229"
      ],
      // Custom model definitions or overrides
      "models": {
        // Override settings for existing models
        // "claude-sonnet-4-20250514": {
        //   "limit": {
        //     "context": 200000,
        //     "output": 8192
        //   }
        // }
      }
    },

    // OpenAI provider configuration
    "openai": {
      "options": {
        "apiKey": "{env:OPENAI_API_KEY}",
        "baseURL": "https://api.openai.com/v1"
      }
    },

    // Google/Gemini provider configuration
    "google": {
      "options": {
        "apiKey": "{env:GOOGLE_API_KEY}"
      }
    },

    // Azure OpenAI provider configuration
    "azure": {
      "options": {
        "apiKey": "{env:AZURE_OPENAI_API_KEY}",
        "baseURL": "{env:AZURE_OPENAI_ENDPOINT}"
      }
    },

    // GitHub Copilot provider configuration
    "copilot": {
      "options": {
        // GitHub Enterprise URL for copilot authentication
        "enterpriseUrl": "https://github.mycompany.com"
      }
    },

    // AWS Bedrock provider configuration
    "bedrock": {
      "options": {
        // AWS credentials are typically from environment or IAM role
      }
    },

    // Custom/local provider example (Ollama, LM Studio, etc.)
    "custom-local": {
      "name": "Local LLM",
      "options": {
        "baseURL": "http://localhost:11434/v1",
        "apiKey": "ollama"
      },
      "models": {
        "llama3.2": {
          "id": "llama3.2",
          "name": "Llama 3.2",
          "release_date": "2024-09-25",
          "attachment": false,
          "reasoning": false,
          "temperature": true,
          "tool_call": true,
          "limit": {
            "context": 128000,
            "output": 8192
          },
          "options": {}
        }
      }
    }
  },

  // ---------------------------------------------------------------------------
  // AGENT CONFIGURATION
  // ---------------------------------------------------------------------------
  // Agents define different operational modes with distinct behaviors.
  // Primary agents: plan, build (user-facing modes)
  // Subagents: general, explore (task-specific helpers)
  // Specialized: title, summary, compaction (internal use)

  "agent": {
    // Build agent - primary coding agent
    "build": {
      "description": "Primary coding and implementation agent",
      // Override model for this agent (optional)
      "model": "anthropic/claude-sonnet-4-20250514",
      // Custom prompt/instructions to prepend to system prompt
      "prompt": "Focus on writing clean, maintainable code with proper error handling.",
      // Agent mode: "primary" (user-facing), "subagent" (helper), "all" (both)
      "mode": "primary",
      // Temperature for generation (0.0-1.0, lower = more deterministic)
      "temperature": 0.7,
      // Top-p (nucleus sampling) parameter
      "top_p": 0.9,
      // Max agentic iterations before forcing text-only response
      "steps": 100,
      // Hex color for UI differentiation
      "color": "#4CAF50",
      // Agent-specific permission overrides
      "permission": {
        "bash": "ask",
        "edit": "allow"
      },
      // Additional model options passed to provider
      "options": {}
    },

    // Plan agent - planning and architecture
    "plan": {
      "description": "Planning and architecture agent - thinks before acting",
      "mode": "primary",
      "temperature": 0.5,
      "color": "#2196F3"
    },

    // General subagent - for subtasks
    "general": {
      "description": "General purpose subagent for delegated tasks",
      "mode": "subagent",
      "temperature": 0.7,
      // Hide from @ autocomplete menu (only for subagents)
      "hidden": false
    },

    // Explore subagent - codebase exploration
    "explore": {
      "description": "Codebase exploration and analysis",
      "mode": "subagent"
    },

    // Title agent - generates session titles
    "title": {
      "description": "Generates concise session titles",
      "model": "anthropic/claude-3-5-haiku-20241022",
      "temperature": 0.3
    },

    // Summary agent - generates summaries
    "summary": {
      "description": "Generates conversation summaries",
      "model": "anthropic/claude-3-5-haiku-20241022"
    },

    // Compaction agent - context compaction
    "compaction": {
      "description": "Compacts conversation context when full",
      "model": "anthropic/claude-3-5-haiku-20241022"
    },

    // Custom agent example
    "reviewer": {
      "description": "Code review specialist",
      "mode": "subagent",
      "prompt": "You are a code review expert. Focus on security, performance, and best practices.",
      "temperature": 0.3,
      "color": "#FF9800",
      "permission": {
        "edit": "deny",
        "bash": "deny"
      }
    },

    // Disable a built-in agent
    // "explore": {
    //   "disable": true
    // }
  },

  // ---------------------------------------------------------------------------
  // MCP (MODEL CONTEXT PROTOCOL) SERVERS
  // ---------------------------------------------------------------------------
  // MCP servers provide additional tools and capabilities to agents.
  // Supports both local (command-based) and remote (URL-based) servers.

  "mcp": {
    // Local MCP server example (filesystem tools)
    "filesystem": {
      "type": "local",
      // Command array: first element is executable, rest are arguments
      "command": ["npx", "-y", "@modelcontextprotocol/server-filesystem", "/path/to/allowed/directory"],
      // Environment variables for the MCP process
      "environment": {
        "NODE_ENV": "production"
      },
      // Enable/disable this MCP server
      "enabled": true,
      // Timeout for fetching tools (default: 5000ms)
      "timeout": 10000
    },

    // GitHub MCP server
    "github": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-github"],
      "environment": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "{env:GITHUB_TOKEN}"
      },
      "enabled": true
    },

    // Brave Search MCP server
    "brave-search": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-brave-search"],
      "environment": {
        "BRAVE_API_KEY": "{env:BRAVE_API_KEY}"
      },
      "enabled": false
    },

    // Remote MCP server example (Streamable HTTP)
    "remote-tools": {
      "type": "remote",
      // URL of the remote MCP server
      "url": "https://mcp.example.com/tools",
      // Custom headers for authentication
      "headers": {
        "Authorization": "Bearer {env:MCP_API_KEY}"
      },
      // OAuth configuration (set to false to disable auto-detection)
      "oauth": {
        // OAuth client ID (optional - uses dynamic registration if not provided)
        "clientId": "my-client-id",
        // OAuth client secret (if required)
        "clientSecret": "{env:MCP_OAUTH_SECRET}",
        // OAuth scopes to request
        "scope": "read write"
      },
      "enabled": false,
      "timeout": 15000
    },

    // Disable an MCP server without removing config
    // "some-server": {
    //   "enabled": false
    // }
  },

  // ---------------------------------------------------------------------------
  // PERMISSIONS
  // ---------------------------------------------------------------------------
  // Control tool access with fine-grained permissions.
  // Values: "allow" (auto-approve), "ask" (prompt user), "deny" (block)
  // Can be a simple value or an object with pattern-based rules.

  "permission": {
    // File reading permissions
    "read": "allow",

    // File editing permissions (includes write, edit, patch, multiedit)
    "edit": "ask",

    // Bash/shell command execution
    "bash": "ask",

    // File globbing (find files by pattern)
    "glob": "allow",

    // Content searching (grep)
    "grep": "allow",

    // Directory listing
    "list": "allow",

    // Task/subagent spawning
    "task": "allow",

    // Access to directories outside project
    "external_directory": "deny",

    // Todo list reading
    "todoread": "allow",

    // Todo list writing
    "todowrite": "allow",

    // Question tool (asking user questions)
    "question": "allow",

    // Web fetch tool
    "webfetch": "ask",

    // Web search tool
    "websearch": "ask",

    // Code search tool
    "codesearch": "allow",

    // LSP (Language Server Protocol) tools
    "lsp": "allow",

    // Doom loop detection override
    "doom_loop": "ask",

    // Pattern-based permission example
    // "bash": {
    //   "git *": "allow",
    //   "npm *": "allow",
    //   "rm -rf *": "deny",
    //   "*": "ask"
    // }
  },

  // ---------------------------------------------------------------------------
  // PLUGINS
  // ---------------------------------------------------------------------------
  // Array of plugin paths (npm packages or file:// URLs)

  "plugin": [
    // NPM package plugins
    // "oh-my-opencode",
    // "@myorg/custom-plugin@1.0.0",

    // Local file plugins (resolved relative to config directory)
    // "file:///path/to/my-plugin.ts"
  ],

  // ---------------------------------------------------------------------------
  // INSTRUCTIONS
  // ---------------------------------------------------------------------------
  // Additional instruction files to include in system prompt.
  // Paths relative to config directory, supports globs.

  "instructions": [
    // "instructions/coding-standards.md",
    // "instructions/*.md",
    // "~/.config/opencode/global-instructions.md"
  ],

  // ---------------------------------------------------------------------------
  // FILE WATCHER
  // ---------------------------------------------------------------------------

  "watcher": {
    // Glob patterns to ignore for file watching
    "ignore": [
      "node_modules/**",
      ".git/**",
      "dist/**",
      "build/**",
      "*.log",
      ".DS_Store"
    ]
  },

  // ---------------------------------------------------------------------------
  // TUI (Terminal User Interface) SETTINGS
  // ---------------------------------------------------------------------------

  "tui": {
    // Scroll speed multiplier (minimum: 0.001)
    "scroll_speed": 1.0,

    // Scroll acceleration settings
    "scroll_acceleration": {
      "enabled": true
    },

    // Diff rendering style:
    //   "auto" - Adapts to terminal width
    //   "stacked" - Always shows single column (vertical layout)
    "diff_style": "auto"
  },

  // ---------------------------------------------------------------------------
  // SERVER CONFIGURATION
  // ---------------------------------------------------------------------------
  // Settings for `opencode serve` and web interface.

  "server": {
    // Port to listen on
    "port": 9999,

    // Hostname/interface to bind to
    "hostname": "localhost",

    // Enable mDNS service discovery
    "mdns": false,

    // Additional domains to allow for CORS
    "cors": [
      // "https://myapp.example.com"
    ]
  },

  // ---------------------------------------------------------------------------
  // KEYBINDINGS
  // ---------------------------------------------------------------------------
  // Customize keyboard shortcuts. Use "none" to disable a keybind.
  // Multiple keys can be comma-separated. Use <leader> for leader key combos.

  "keybinds": {
    // Leader key for keybind combinations
    "leader": "ctrl+x",

    // Application
    "app_exit": "ctrl+c,ctrl+d,<leader>q",
    "editor_open": "<leader>e",
    "theme_list": "<leader>t",
    "sidebar_toggle": "<leader>b",
    "scrollbar_toggle": "none",
    "username_toggle": "none",
    "status_view": "<leader>s",

    // Session management
    "session_new": "<leader>n",
    "session_list": "<leader>l",
    "session_timeline": "<leader>g",
    "session_export": "<leader>x",
    "session_fork": "none",
    "session_rename": "none",
    "session_share": "none",
    "session_unshare": "none",
    "session_interrupt": "escape",
    "session_compact": "<leader>c",
    "session_child_cycle": "<leader>right",
    "session_child_cycle_reverse": "<leader>left",
    "session_parent": "<leader>up",

    // Message navigation
    "messages_page_up": "pageup",
    "messages_page_down": "pagedown",
    "messages_half_page_up": "ctrl+alt+u",
    "messages_half_page_down": "ctrl+alt+d",
    "messages_first": "ctrl+g,home",
    "messages_last": "ctrl+alt+g,end",
    "messages_next": "none",
    "messages_previous": "none",
    "messages_last_user": "none",
    "messages_copy": "<leader>y",
    "messages_undo": "<leader>u",
    "messages_redo": "<leader>r",
    "messages_toggle_conceal": "<leader>h",
    "tool_details": "none",

    // Model selection
    "model_list": "<leader>m",
    "model_cycle_recent": "f2",
    "model_cycle_recent_reverse": "shift+f2",
    "model_cycle_favorite": "none",
    "model_cycle_favorite_reverse": "none",

    // Commands and agents
    "command_list": "ctrl+p",
    "agent_list": "<leader>a",
    "agent_cycle": "tab",
    "agent_cycle_reverse": "shift+tab",
    "variant_cycle": "ctrl+t",

    // Input controls
    "input_clear": "ctrl+c",
    "input_paste": "ctrl+v",
    "input_submit": "return",
    "input_newline": "shift+return,ctrl+return,alt+return,ctrl+j",
    "input_undo": "ctrl+-,super+z",
    "input_redo": "ctrl+.,super+shift+z",

    // History navigation
    "history_previous": "up",
    "history_next": "down",

    // Terminal
    "terminal_suspend": "ctrl+z",
    "terminal_title_toggle": "none",
    "tips_toggle": "<leader>h"
  },

  // ---------------------------------------------------------------------------
  // FORMATTER CONFIGURATION
  // ---------------------------------------------------------------------------
  // Configure external formatters for code formatting.
  // Set to false to disable all formatters.

  "formatter": {
    "prettier": {
      // Disable this specific formatter
      "disabled": false,
      // Command to run the formatter
      "command": ["npx", "prettier", "--write"],
      // Environment variables
      "environment": {},
      // File extensions this formatter handles
      "extensions": [".js", ".ts", ".jsx", ".tsx", ".json", ".md", ".css"]
    },
    "black": {
      "command": ["black"],
      "extensions": [".py"]
    },
    "gofmt": {
      "command": ["gofmt", "-w"],
      "extensions": [".go"]
    }
    // Set to false to disable all formatters:
    // "formatter": false
  },

  // ---------------------------------------------------------------------------
  // LSP (LANGUAGE SERVER PROTOCOL) CONFIGURATION
  // ---------------------------------------------------------------------------
  // Configure language servers for code intelligence.
  // Set to false to disable all LSP servers.

  "lsp": {
    // TypeScript language server
    "typescript": {
      "command": ["typescript-language-server", "--stdio"],
      "extensions": [".ts", ".tsx", ".js", ".jsx"],
      "disabled": false,
      "env": {},
      "initialization": {
        // LSP initialization options
      }
    },
    // Python language server
    "python": {
      "command": ["pylsp"],
      "extensions": [".py"]
    },
    // Go language server
    "gopls": {
      "command": ["gopls"],
      "extensions": [".go"]
    },
    // Disable a built-in LSP server
    // "rust": {
    //   "disabled": true
    // }
    // Set to false to disable all LSP:
    // "lsp": false
  },

  // ---------------------------------------------------------------------------
  // COMPACTION SETTINGS
  // ---------------------------------------------------------------------------
  // Control automatic context compaction behavior.

  "compaction": {
    // Enable automatic compaction when context is full (default: true)
    "auto": true,

    // Enable pruning of old tool outputs (default: true)
    "prune": true
  },

  // ---------------------------------------------------------------------------
  // ENTERPRISE SETTINGS
  // ---------------------------------------------------------------------------

  "enterprise": {
    // Enterprise server URL for SSO and centralized config
    "url": "https://opencode.mycompany.com"
  },

  // ---------------------------------------------------------------------------
  // EXPERIMENTAL FEATURES
  // ---------------------------------------------------------------------------
  // Unstable features that may change or be removed.

  "experimental": {
    // Enable the batch tool for parallel operations
    "batch_tool": false,

    // Enable OpenTelemetry spans for AI SDK calls
    "openTelemetry": false,

    // Number of retries for chat completions on failure
    "chatMaxRetries": 3,

    // Timeout in milliseconds for MCP requests
    "mcp_timeout": 5000,

    // Continue agent loop when a tool call is denied
    "continue_loop_on_deny": false,

    // Disable paste content summarization
    "disable_paste_summary": false,

    // Tools only available to primary agents
    "primary_tools": [
      // "task"
    ],

    // Hooks for custom automation
    "hook": {
      // Run commands when files are edited (by file pattern)
      "file_edited": {
        "*.ts": [
          {
            "command": ["npm", "run", "lint:fix"],
            "environment": {}
          }
        ],
        "*.go": [
          {
            "command": ["gofmt", "-w", "$FILE"],
            "environment": {}
          }
        ]
      },

      // Run commands when session completes
      "session_completed": [
        // {
        //   "command": ["./scripts/post-session.sh"],
        //   "environment": {
        //     "SESSION_ID": "$SESSION_ID"
        //   }
        // }
      ]
    }
  },

  // ---------------------------------------------------------------------------
  // CUSTOM COMMANDS
  // ---------------------------------------------------------------------------
  // Define custom slash commands. Can also be defined as .md files in
  // .opencode/command/ or command/ directories.

  "command": {
    "test": {
      // Template for the command (supports $ARGUMENTS placeholder)
      "template": "Run the test suite with: npm test $ARGUMENTS",
      // Description shown in command list
      "description": "Run tests with optional arguments",
      // Override agent for this command
      "agent": "build",
      // Override model for this command
      "model": "anthropic/claude-sonnet-4-20250514",
      // Run as subtask instead of main conversation
      "subtask": false
    },
    "review": {
      "template": "Please review the following code for best practices, security issues, and potential improvements:\n\n$ARGUMENTS",
      "description": "Code review assistant",
      "agent": "plan"
    },
    "explain": {
      "template": "Explain the following code in detail, including its purpose, how it works, and any notable patterns or techniques:\n\n$ARGUMENTS",
      "description": "Explain code in detail"
    }
  }
}
